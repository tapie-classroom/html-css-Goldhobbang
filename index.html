<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>랜덤 버튼 게임</title>
    <style>
        body {
            text-align: center;
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            width: 100%;
            overflow-y: auto;
        }
        
        #button-container {
            display: grid;
            gap: 5px; /* 버튼 간 간격 증가 */
            width: 100%;
            box-sizing: border-box;
            padding: 10px;
            grid-template-columns: repeat(auto-fill, minmax(50px, 50px)); /* 고정 크기 정사각형 */
            overflow-y: auto;
        }
        
        .flip-button {
            width: 50px; /* 고정 너비 */
            height: 50px; /* 고정 높이 */
            font-size: 18px; /* 약간 더 큰 글씨 */
            cursor: pointer;
            background-color: #ddd;
            border: 1px solid #888;
            transition: transform 0.3s, background-color 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 4px; /* 약간의 둥근 모서리 */
        }
        
        .flip-button.flipped {
            transform: rotateY(180deg);
            background-color: #f0a500;
        }
        
        /* 당첨 버튼 특별 스타일 */
        .flip-button.winner {
            background-color: #000000; /* 밝은 노란색으로 변경 */
            box-shadow: 0 0 15px 5px gold;
            z-index: 10;
            border: 2px solid #ff9800; /* 테두리 강조 */
        }
        
        /* 꽝 글자 좌우반전 */
        .flip-button.flipped .fail-text {
            display: inline-block;
            transform: rotateY(180deg); /* 뒤집어진 상태에서 다시 반전시켜 정상적으로 보이게 함 */
        }
        
        /* 폭죽 효과 스타일 */
        .firework {
            position: fixed;
            width: 5px;
            height: 5px;
            border-radius: 50%;
            animation: explode 1s ease-out forwards;
            z-index: 999;
        }
        
        @keyframes explode {
            0% {
                transform: scale(0);
                opacity: 1;
            }
            50% {
                opacity: 1;
            }
            100% {
                transform: scale(40);
                opacity: 0;
            }
        }
        
        /* 폭죽 조각 스타일 */
        .particle {
            position: fixed;
            width: 3px;
            height: a0px;
            background-color: #ff0000;
            border-radius: 50%;
            z-index: 999;
            animation: blast 1s ease-out forwards;
        }
        
        @keyframes blast {
            0% {
                opacity: 1;
                transform: scale(1);
            }
            100% {
                opacity: 0;
                transform: translateY(100px) scale(0);
            }
        }
    </style>
</head>
<body>
    <div id="button-container"></div>

    <script>
        document.addEventListener("DOMContentLoaded", function () {
            // 컨테이너 높이를 설정하지 않고 내용에 따라 자동으로 확장되도록 함
            const container = document.getElementById("button-container");
            
            // 화면 크기에 따라 적절한 버튼 수 계산
            const screenWidth = window.innerWidth;
            const columns = Math.floor((screenWidth - 20) / 55); // 버튼 크기(50px) + 간격(5px)
            
            // 행 수를 고정된 값으로 설정 (스크롤을 허용하기 위해)
            const rows = 100; // 충분히 많은 행 수
            const totalButtons = columns * rows;
            
            const winnerIndex = Math.floor(Math.random() * totalButtons); // 랜덤 당첨 버튼 설정

            for (let i = 0; i < totalButtons; i++) {
                const button = document.createElement("button");
                button.classList.add("flip-button");
                
                // 일반 텍스트로 ? 표시
                const textSpan = document.createElement("span");
                textSpan.textContent = "❓";
                button.appendChild(textSpan);
                
                button.dataset.index = i;

                button.addEventListener("click", function () {
                    if (button.classList.contains("flipped")) {
                        return; // 이미 뒤집힌 버튼은 다시 클릭해도 반응하지 않음
                    }
                    
                    button.classList.add("flipped");
                    if(parseInt(button.dataset.index) === winnerIndex) {
                        textSpan.textContent = "🎉 당첨!";
                        button.classList.add("winner"); // 당첨 버튼 특별 스타일 추가
                        createFireworks(); // 당첨 시 폭죽 효과 호출
                    } else {
                        textSpan.textContent = "❌ 꽝!";
                    }
                });

                container.appendChild(button);
            }
            
            // 폭죽 효과 함수
            function createFireworks() {
                // 왼쪽 폭죽
                createFireworkAt(50, window.innerHeight / 2);
                // 오른쪽 폭죽
                createFireworkAt(window.innerWidth - 50, window.innerHeight / 2);
            }
            
            function createFireworkAt(x, y) {
                // 메인 폭죽 생성
                const firework = document.createElement('div');
                firework.className = 'firework';
                firework.style.left = x + 'px';
                firework.style.top = y + 'px';
                firework.style.backgroundColor = getRandomColor();
                document.body.appendChild(firework);
                
                // 폭죽 입자 생성
                for (let i = 0; i < 30; i++) {
                    setTimeout(() => {
                        const particle = document.createElement('div');
                        particle.className = 'particle';
                        particle.style.left = x + 'px';
                        particle.style.top = y + 'px';
                        particle.style.backgroundColor = getRandomColor();
                        
                        // 랜덤 방향으로 움직임
                        const angle = Math.random() * Math.PI * 2;
                        const distance = Math.random() * 100 + 50;
                        const duration = Math.random() * 1 + 0.5;
                        
                        particle.style.animation = `blast ${duration}s ease-out forwards`;
                        particle.style.transform = `rotate(${angle}rad)`;
                        
                        // 입자의 움직임 설정
                        particle.animate([
                            { transform: 'translate(0, 0) scale(1)' },
                            { transform: `translate(${Math.cos(angle) * distance}px, ${Math.sin(angle) * distance}px) scale(0)` }
                        ], {
                            duration: duration * 1000,
                            easing: 'cubic-bezier(0,0,0.2,1)',
                            fill: 'forwards'
                        });
                        
                        document.body.appendChild(particle);
                        
                        // 입자 제거
                        setTimeout(() => {
                            document.body.removeChild(particle);
                        }, duration * 1000);
                    }, Math.random() * 200);
                }
                
                // 메인 폭죽 제거
                setTimeout(() => {
                    document.body.removeChild(firework);
                }, 1000);
            }
            
            // 랜덤 색상 생성 함수
            function getRandomColor() {
                const colors = ['#ff0000', '#ffff00', '#00ff00', '#00ffff', '#0000ff', '#ff00ff', '#ff8800', '#88ff00'];
                return colors[Math.floor(Math.random() * colors.length)];
            }
            
            // 화면 크기가 변경될 때 버튼 크기와 개수 조정
            window.addEventListener('resize', function() {
                location.reload();
            });
        });
    </script>
</body>
</html>